{% extends "base.html" %}

{% block title %}AutoKanban — Проекты{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 mb-0">{{ current_project_name or "Проекты" }}</h1>
  </div>

  <div id="kanban-root">
    {% include "partials/kanban.html" %}
  </div>
  <script>
    const kanbanRoot = document.getElementById("kanban-root");
    const scrollMessagesToBottom = () => {
      kanbanRoot.querySelectorAll(".js-messages-scroll").forEach((container) => {
        container.scrollTop = container.scrollHeight;
      });
    };
    const initialScroll = () => {
      requestAnimationFrame(scrollMessagesToBottom);
    };
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", initialScroll);
    } else {
      initialScroll();
    }
  </script>
{% endblock %}
